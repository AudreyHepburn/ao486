#include <stdio.h>
#include <unistd.h>

#include <system.h>
#include <io.h>

int main() {
	while(1) {
		int status = IORD(PIO_0_BASE, 0);
		printf("Port: %02x\n", status);
		usleep(1000000);

		if(status & 0x1) {
			while((IORD(PS2_0_BASE, 4) & 1) == 1) {
				int scancode = IORD(PS2_0_BASE, 0);
				printf("code: %02x\n", scancode);
			}
		}
	}

	return 0;
}
